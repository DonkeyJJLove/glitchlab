version: 1
weights:
  import_call: 1.5
  schema_contract: 2.0
  telemetry: 0.5
  rpc: 2.0
defaults:
  enter_scope: { AST: [1,1,1], MOZ: [1,0,0] }
  exit_scope:  { AST: [0,0,-1], MOZ: [0,0,0] }
  define:      { AST: [0,1,0],  MOZ: [0,1,0] }
  use:         { AST: [0,1,0],  MOZ: [0,1,0] }
  link:        { AST: [0,1,0],  MOZ: [0,1,0] }
  bucket_jump: { AST: [0,0,ΔZ], MOZ: [0,0,ΔZ] }
  reassign:    { AST: [1,h,0],  MOZ: [1,h,0] }
  contract:    { AST: [-k,0,0], MOZ: [-k,0,0] }
  expand:      { AST: [k,0,0],  MOZ: [k,0,0] }
overrides:
  topic.publish:   { MOZ: [0, w(schema_contract), 0] }
  topic.subscribe: { MOZ: [0, w(import_call), 0] }
  request_reply:   { MOZ: [0, w(rpc), 0] }
  telemetry:       { MOZ: [0, w(telemetry), 0] }
invariants:
  - id: I1_plane_separation
    rule: "control and data planes must not share identical topic names"
  - id: I2_path_closure_5s
    rule: "PATH run.start >> (run.done || run.error) within 5000 ms"
  - id: I3_no_empty_bridges
    rule: "ΔH>0 must reference existing symbol/topic"
  - id: I4_alpha_beta_sum
    rule: "alpha+beta == 1 when S+H>0"
