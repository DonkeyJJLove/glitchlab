{
  "architect_review": {
    "system": "Jesteś asystentem inżynierskim GlitchLab. Twoja analiza ma być deterministyczna, konkretna, bez wprowadzania losowości. Oceniaj wpływ zmian na architekturę i HUD/Mosaic⇄AST.",
    "user": "Cel: architect_review. Przygotuj plan refaktoryzacji i mapę ryzyk.\nRepo: . | LOC=41735, modules=200, defs=2050, classes=223.\nZidentyfikuj moduły krytyczne i zaproponuj kroki poprawy spójności.",
    "context": {
      "glx_state": {},
      "git_head": null,
      "git_branch": null,
      "recent_commits": [],
      "delta_last": [],
      "top_modules": [
        {
          "path": "glitchlab/gui/mosaic/hybrid_ast_mosaic.py",
          "loc": 1382,
          "defs": [
            {
              "name": "_rng_for_meta",
              "lineno": 150
            },
            {
              "name": "_meta_for",
              "lineno": 158
            },
            {
              "name": "ast_deltas",
              "lineno": 178
            },
            {
              "name": "add",
              "lineno": 186
            },
            {
              "name": "compress_ast",
              "lineno": 236
            },
            {
              "name": "build_mosaic_grid",
              "lineno": 267
            },
            {
              "name": "build_mosaic_hex",
              "lineno": 282
            },
            {
              "name": "build_mosaic",
              "lineno": 298
            },
            {
              "name": "region_ids",
              "lineno": 304
            },
            {
              "name": "_xy_of_idx",
              "lineno": 312
            },
            {
              "name": "_sigmoid",
              "lineno": 319
            },
            {
              "name": "_soft_label",
              "lineno": 329
            },
            {
              "name": "_only_py",
              "lineno": 334
            },
            {
              "name": "_abs",
              "lineno": 338
            },
            {
              "name": "tile_dist",
              "lineno": 343
            },
            {
              "name": "_dm_greedy_oneway",
              "lineno": 360
            },
            {
              "name": "_length_penalty",
              "lineno": 374
            },
            {
              "name": "_pair_cost",
              "lineno": 388
            },
            {
              "name": "D_M",
              "lineno": 413
            },
            {
              "name": "phi_region_for",
              "lineno": 435
            },
            {
              "name": "phi_region_for_balanced",
              "lineno": 443
            },
            {
              "name": "phi_region_for_entropy",
              "lineno": 476
            },
            {
              "name": "near_thr",
              "lineno": 477
            },
            {
              "name": "load_policy_json",
              "lineno": 488
            },
            {
              "name": "make_selector_policy_aware",
              "lineno": 518
            },
            {
              "name": "_sel",
              "lineno": 534
            },
            {
              "name": "centroid",
              "lineno": 553
            },
            {
              "name": "phi_cost",
              "lineno": 561
            },
            {
              "name": "psi_feedback",
              "lineno": 582
            },
            {
              "name": "_neighbors_grid",
              "lineno": 609
            },
            {
              "name": "_neighbors_hex_oddr",
              "lineno": 619
            },
            {
              "name": "_adjacency_indices",
              "lineno": 632
            },
            {
              "name": "_connected_components",
              "lineno": 645
            },
            {
              "name": "mosaic_profile",
              "lineno": 679
            },
            {
              "name": "couple_alpha_beta",
              "lineno": 715
            },
            {
              "name": "distance_ast_mosaic",
              "lineno": 736
            },
            {
              "name": "invariants_check",
              "lineno": 743
            },
            {
              "name": "_selector_from_args",
              "lineno": 766
            },
            {
              "name": "run_once",
              "lineno": 779
            },
            {
              "name": "sweep",
              "lineno": 813
            },
            {
              "name": "sign_test_phi2_better",
              "lineno": 829
            },
            {
              "name": "_ast_summary_for_source_det",
              "lineno": 862
            },
            {
              "name": "_file_selector_filter",
              "lineno": 888
            },
            {
              "name": "run_from_git",
              "lineno": 898
            },
            {
              "name": "_pretty_table",
              "lineno": 1031
            },
            {
              "name": "rowfmt",
              "lineno": 1035
            },
            {
              "name": "line",
              "lineno": 1046
            },
            {
              "name": "cmd_run",
              "lineno": 1055
            },
            {
              "name": "cmd_sweep",
              "lineno": 1075
            },
            {
              "name": "cmd_test",
              "lineno": 1087
            },
            {
              "name": "_normpath_under_project",
              "lineno": 1100
            },
            {
              "name": "_emit_fallback_artifacts",
              "lineno": 1105
            },
            {
              "name": "cmd_from_git_dump",
              "lineno": 1157
            },
            {
              "name": "_git_run",
              "lineno": 1281
            },
            {
              "name": "_git_show_file",
              "lineno": 1287
            },
            {
              "name": "_git_top",
              "lineno": 1294
            },
            {
              "name": "cmd_from_git",
              "lineno": 1304
            },
            {
              "name": "build_cli",
              "lineno": 1321
            },
            {
              "name": "main",
              "lineno": 1375
            }
          ],
          "classes": [
            {
              "name": "AstNode",
              "lineno": 127
            },
            {
              "name": "AstSummary",
              "lineno": 138
            },
            {
              "name": "Mosaic",
              "lineno": 256
            }
          ]
        },
        {
          "path": "glitchlab/gui/app.py",
          "loc": 921,
          "defs": [
            {
              "name": "init_styles",
              "lineno": 28
            },
            {
              "name": "__init__",
              "lineno": 87
            },
            {
              "name": "publish",
              "lineno": 89
            },
            {
              "name": "subscribe",
              "lineno": 91
            },
            {
              "name": "request",
              "lineno": 93
            },
            {
              "name": "__init__",
              "lineno": 117
            },
            {
              "name": "__init__",
              "lineno": 132
            },
            {
              "name": "_build_ui",
              "lineno": 168
            },
            {
              "name": "_init_sash",
              "lineno": 232
            },
            {
              "name": "_wire_bus",
              "lineno": 258
            },
            {
              "name": "_on_preset_parsed",
              "lineno": 325
            },
            {
              "name": "_load_image_path",
              "lineno": 334
            },
            {
              "name": "_save_image_path",
              "lineno": 382
            },
            {
              "name": "_pil_to_u8",
              "lineno": 401
            },
            {
              "name": "_array_to_pil",
              "lineno": 414
            },
            {
              "name": "run_step",
              "lineno": 428
            },
            {
              "name": "run_preset",
              "lineno": 465
            },
            {
              "name": "_on_progress",
              "lineno": 515
            },
            {
              "name": "_on_run_done",
              "lineno": 527
            },
            {
              "name": "_on_run_error",
              "lineno": 564
            },
            {
              "name": "_update_bottom_from_cache",
              "lineno": 578
            },
            {
              "name": "_update_edit_menu_state",
              "lineno": 586
            },
            {
              "name": "_on_undo",
              "lineno": 594
            },
            {
              "name": "_on_redo",
              "lineno": 623
            },
            {
              "name": "_toggle_left",
              "lineno": 653
            },
            {
              "name": "_toggle_right",
              "lineno": 673
            },
            {
              "name": "_toggle_hud",
              "lineno": 689
            },
            {
              "name": "_toggle_fullscreen",
              "lineno": 705
            },
            {
              "name": "_get_active_layer_pil",
              "lineno": 719
            },
            {
              "name": "_get_composite_np",
              "lineno": 741
            },
            {
              "name": "_refresh_composite",
              "lineno": 756
            },
            {
              "name": "_layers_snapshot",
              "lineno": 769
            },
            {
              "name": "_calc_layers_sig",
              "lineno": 784
            },
            {
              "name": "_publish_layers_snapshot",
              "lineno": 793
            },
            {
              "name": "_on_layers_changed",
              "lineno": 806
            },
            {
              "name": "_on_layer_add",
              "lineno": 812
            },
            {
              "name": "_on_layer_remove",
              "lineno": 845
            },
            {
              "name": "_on_layer_set_active",
              "lineno": 856
            },
            {
              "name": "_on_layer_update",
              "lineno": 865
            },
            {
              "name": "_on_layers_reorder",
              "lineno": 882
            },
            {
              "name": "main",
              "lineno": 902
            }
          ],
          "classes": [
            {
              "name": "EventBus",
              "lineno": 86
            },
            {
              "name": "AppState",
              "lineno": 116
            },
            {
              "name": "App",
              "lineno": 131
            }
          ]
        },
        {
          "path": "glitchlab/tests/ast_mosaic_coupled.py",
          "loc": 732,
          "defs": [
            {
              "name": "energy",
              "lineno": 53
            },
            {
              "name": "entropy",
              "lineno": 57
            },
            {
              "name": "_node_label",
              "lineno": 75
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 91
            },
            {
              "name": "walk",
              "lineno": 92
            },
            {
              "name": "_group_of",
              "lineno": 111
            },
            {
              "name": "_coords_for_tree",
              "lineno": 119
            },
            {
              "name": "walk",
              "lineno": 122
            },
            {
              "name": "_meta_for_node",
              "lineno": 148
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 164
            },
            {
              "name": "group_centroids",
              "lineno": 193
            },
            {
              "name": "coords_for_lambda",
              "lineno": 204
            },
            {
              "name": "build_base_mosaic",
              "lineno": 219
            },
            {
              "name": "_norm01",
              "lineno": 231
            },
            {
              "name": "_sobel_mag",
              "lineno": 238
            },
            {
              "name": "mosaic_from_ast",
              "lineno": 255
            },
            {
              "name": "_pos_lam",
              "lineno": 269
            },
            {
              "name": "region_indices",
              "lineno": 296
            },
            {
              "name": "region_centroid",
              "lineno": 302
            },
            {
              "name": "region_feats",
              "lineno": 310
            },
            {
              "name": "fuse_meta",
              "lineno": 322
            },
            {
              "name": "draw_ast",
              "lineno": 331
            },
            {
              "name": "draw_mosaic",
              "lineno": 345
            },
            {
              "name": "draw_region_frame",
              "lineno": 360
            },
            {
              "name": "draw_fusion",
              "lineno": 371
            },
            {
              "name": "draw_infographic",
              "lineno": 406
            },
            {
              "name": "__init__",
              "lineno": 445
            },
            {
              "name": "_font_step",
              "lineno": 540
            },
            {
              "name": "reset_views",
              "lineno": 547
            },
            {
              "name": "render",
              "lineno": 553
            },
            {
              "name": "on_lambda_changed",
              "lineno": 581
            },
            {
              "name": "on_node_changed",
              "lineno": 585
            },
            {
              "name": "recompute_mosaic_from_ast",
              "lineno": 590
            },
            {
              "name": "apply_feedback_and_recompute",
              "lineno": 609
            },
            {
              "name": "feats_at",
              "lineno": 618
            },
            {
              "name": "on_region_changed",
              "lineno": 641
            },
            {
              "name": "on_pick_ast",
              "lineno": 646
            },
            {
              "name": "on_click_any",
              "lineno": 656
            },
            {
              "name": "repaint",
              "lineno": 679
            },
            {
              "name": "main",
              "lineno": 725
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 44
            },
            {
              "name": "Mosaic",
              "lineno": 62
            },
            {
              "name": "App",
              "lineno": 444
            }
          ]
        },
        {
          "path": "glitchlab/gui/mosaic/tests/ast_mosaic_coupled.py",
          "loc": 732,
          "defs": [
            {
              "name": "energy",
              "lineno": 53
            },
            {
              "name": "entropy",
              "lineno": 57
            },
            {
              "name": "_node_label",
              "lineno": 75
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 91
            },
            {
              "name": "walk",
              "lineno": 92
            },
            {
              "name": "_group_of",
              "lineno": 111
            },
            {
              "name": "_coords_for_tree",
              "lineno": 119
            },
            {
              "name": "walk",
              "lineno": 122
            },
            {
              "name": "_meta_for_node",
              "lineno": 148
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 164
            },
            {
              "name": "group_centroids",
              "lineno": 193
            },
            {
              "name": "coords_for_lambda",
              "lineno": 204
            },
            {
              "name": "build_base_mosaic",
              "lineno": 219
            },
            {
              "name": "_norm01",
              "lineno": 231
            },
            {
              "name": "_sobel_mag",
              "lineno": 238
            },
            {
              "name": "mosaic_from_ast",
              "lineno": 255
            },
            {
              "name": "_pos_lam",
              "lineno": 269
            },
            {
              "name": "region_indices",
              "lineno": 296
            },
            {
              "name": "region_centroid",
              "lineno": 302
            },
            {
              "name": "region_feats",
              "lineno": 310
            },
            {
              "name": "fuse_meta",
              "lineno": 322
            },
            {
              "name": "draw_ast",
              "lineno": 331
            },
            {
              "name": "draw_mosaic",
              "lineno": 345
            },
            {
              "name": "draw_region_frame",
              "lineno": 360
            },
            {
              "name": "draw_fusion",
              "lineno": 371
            },
            {
              "name": "draw_infographic",
              "lineno": 406
            },
            {
              "name": "__init__",
              "lineno": 445
            },
            {
              "name": "_font_step",
              "lineno": 540
            },
            {
              "name": "reset_views",
              "lineno": 547
            },
            {
              "name": "render",
              "lineno": 553
            },
            {
              "name": "on_lambda_changed",
              "lineno": 581
            },
            {
              "name": "on_node_changed",
              "lineno": 585
            },
            {
              "name": "recompute_mosaic_from_ast",
              "lineno": 590
            },
            {
              "name": "apply_feedback_and_recompute",
              "lineno": 609
            },
            {
              "name": "feats_at",
              "lineno": 618
            },
            {
              "name": "on_region_changed",
              "lineno": 641
            },
            {
              "name": "on_pick_ast",
              "lineno": 646
            },
            {
              "name": "on_click_any",
              "lineno": 656
            },
            {
              "name": "repaint",
              "lineno": 679
            },
            {
              "name": "main",
              "lineno": 725
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 44
            },
            {
              "name": "Mosaic",
              "lineno": 62
            },
            {
              "name": "App",
              "lineno": 444
            }
          ]
        },
        {
          "path": "glitchlab/.githooks/post-commit.py",
          "loc": 640,
          "defs": [
            {
              "name": "_is_git_repo",
              "lineno": 24
            },
            {
              "name": "_strip_inline_comment",
              "lineno": 34
            },
            {
              "name": "_parse_glx_run",
              "lineno": 50
            },
            {
              "name": "_validate_mask",
              "lineno": 99
            },
            {
              "name": "_clean_value",
              "lineno": 107
            },
            {
              "name": "_parse_env_file",
              "lineno": 114
            },
            {
              "name": "_load_env",
              "lineno": 127
            },
            {
              "name": "_expand_vars_and_user",
              "lineno": 147
            },
            {
              "name": "_resolve_path",
              "lineno": 152
            },
            {
              "name": "_norm_paths_in_env",
              "lineno": 166
            },
            {
              "name": "_log",
              "lineno": 190
            },
            {
              "name": "_fail",
              "lineno": 194
            },
            {
              "name": "_git",
              "lineno": 200
            },
            {
              "name": "_git_top",
              "lineno": 204
            },
            {
              "name": "_rev_parse",
              "lineno": 216
            },
            {
              "name": "_rev_ok",
              "lineno": 221
            },
            {
              "name": "_empty_tree_oid",
              "lineno": 230
            },
            {
              "name": "_detect_base",
              "lineno": 246
            },
            {
              "name": "_dirs_chain_up",
              "lineno": 284
            },
            {
              "name": "_req",
              "lineno": 313
            },
            {
              "name": "_as_int",
              "lineno": 319
            },
            {
              "name": "_as_float01",
              "lineno": 326
            },
            {
              "name": "_redact_env",
              "lineno": 337
            },
            {
              "name": "_module_exists",
              "lineno": 348
            },
            {
              "name": "_module_cmd_from_candidates",
              "lineno": 355
            },
            {
              "name": "_child_env",
              "lineno": 379
            },
            {
              "name": "_run_gateway",
              "lineno": 386
            },
            {
              "name": "_run_mosaic",
              "lineno": 424
            },
            {
              "name": "_send_mail",
              "lineno": 476
            },
            {
              "name": "_should_zip",
              "lineno": 516
            },
            {
              "name": "_writestr_deterministic",
              "lineno": 523
            },
            {
              "name": "_make_zip",
              "lineno": 530
            },
            {
              "name": "main",
              "lineno": 579
            }
          ],
          "classes": []
        },
        {
          "path": "glitchlab/analysis/autonomy/gateway.py",
          "loc": 637,
          "defs": [
            {
              "name": "_strip_inline_comment",
              "lineno": 46
            },
            {
              "name": "_clean_value",
              "lineno": 61
            },
            {
              "name": "_simple_parse_env",
              "lineno": 68
            },
            {
              "name": "_dirs_chain_up",
              "lineno": 82
            },
            {
              "name": "_load_dotenv_chain_into_environ",
              "lineno": 102
            },
            {
              "name": "_norm_from",
              "lineno": 134
            },
            {
              "name": "_best_guess_package_root",
              "lineno": 141
            },
            {
              "name": "_int_env",
              "lineno": 165
            },
            {
              "name": "_utc_iso",
              "lineno": 227
            },
            {
              "name": "_safe_read_json",
              "lineno": 231
            },
            {
              "name": "_read_text",
              "lineno": 240
            },
            {
              "name": "_rel_to_project",
              "lineno": 247
            },
            {
              "name": "_is_binary_like",
              "lineno": 254
            },
            {
              "name": "_redact_env_snapshot",
              "lineno": 264
            },
            {
              "name": "scan_repository",
              "lineno": 280
            },
            {
              "name": "_excluded",
              "lineno": 295
            },
            {
              "name": "_run_git",
              "lineno": 382
            },
            {
              "name": "git_snapshot",
              "lineno": 393
            },
            {
              "name": "make_prompt_pack",
              "lineno": 437
            },
            {
              "name": "build_selfdoc",
              "lineno": 474
            },
            {
              "name": "write_outputs",
              "lineno": 522
            },
            {
              "name": "_parse_argv",
              "lineno": 562
            },
            {
              "name": "main",
              "lineno": 589
            }
          ],
          "classes": [
            {
              "name": "Telemetry",
              "lineno": 190
            },
            {
              "name": "SelfDocPack",
              "lineno": 208
            }
          ]
        },
        {
          "path": "glitchlab/tests/metarelation_scaling_test.py",
          "loc": 591,
          "defs": [
            {
              "name": "energy",
              "lineno": 49
            },
            {
              "name": "entropy",
              "lineno": 53
            },
            {
              "name": "build_demo_mosaic",
              "lineno": 70
            },
            {
              "name": "region_indices",
              "lineno": 89
            },
            {
              "name": "region_centroid",
              "lineno": 95
            },
            {
              "name": "region_feats",
              "lineno": 103
            },
            {
              "name": "fuse_meta",
              "lineno": 118
            },
            {
              "name": "_node_label",
              "lineno": 131
            },
            {
              "name": "_group_of",
              "lineno": 149
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 167
            },
            {
              "name": "walk",
              "lineno": 171
            },
            {
              "name": "_coords_for_tree",
              "lineno": 190
            },
            {
              "name": "walk",
              "lineno": 198
            },
            {
              "name": "_meta_for_node",
              "lineno": 228
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 248
            },
            {
              "name": "group_centroids",
              "lineno": 280
            },
            {
              "name": "coords_for_lambda",
              "lineno": 291
            },
            {
              "name": "draw_ast",
              "lineno": 306
            },
            {
              "name": "draw_mosaic",
              "lineno": 317
            },
            {
              "name": "draw_region_frame",
              "lineno": 332
            },
            {
              "name": "draw_fusion",
              "lineno": 342
            },
            {
              "name": "draw_infographic",
              "lineno": 381
            },
            {
              "name": "__init__",
              "lineno": 419
            },
            {
              "name": "_font_step",
              "lineno": 492
            },
            {
              "name": "render",
              "lineno": 502
            },
            {
              "name": "reset_views",
              "lineno": 530
            },
            {
              "name": "repaint",
              "lineno": 535
            },
            {
              "name": "main",
              "lineno": 584
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 41
            },
            {
              "name": "Mosaic",
              "lineno": 58
            },
            {
              "name": "App",
              "lineno": 418
            }
          ]
        },
        {
          "path": "glitchlab/gui/mosaic/tests/metarelation_scaling_test.py",
          "loc": 591,
          "defs": [
            {
              "name": "energy",
              "lineno": 49
            },
            {
              "name": "entropy",
              "lineno": 53
            },
            {
              "name": "build_demo_mosaic",
              "lineno": 70
            },
            {
              "name": "region_indices",
              "lineno": 89
            },
            {
              "name": "region_centroid",
              "lineno": 95
            },
            {
              "name": "region_feats",
              "lineno": 103
            },
            {
              "name": "fuse_meta",
              "lineno": 118
            },
            {
              "name": "_node_label",
              "lineno": 131
            },
            {
              "name": "_group_of",
              "lineno": 149
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 167
            },
            {
              "name": "walk",
              "lineno": 171
            },
            {
              "name": "_coords_for_tree",
              "lineno": 190
            },
            {
              "name": "walk",
              "lineno": 198
            },
            {
              "name": "_meta_for_node",
              "lineno": 228
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 248
            },
            {
              "name": "group_centroids",
              "lineno": 280
            },
            {
              "name": "coords_for_lambda",
              "lineno": 291
            },
            {
              "name": "draw_ast",
              "lineno": 306
            },
            {
              "name": "draw_mosaic",
              "lineno": 317
            },
            {
              "name": "draw_region_frame",
              "lineno": 332
            },
            {
              "name": "draw_fusion",
              "lineno": 342
            },
            {
              "name": "draw_infographic",
              "lineno": 381
            },
            {
              "name": "__init__",
              "lineno": 419
            },
            {
              "name": "_font_step",
              "lineno": 492
            },
            {
              "name": "render",
              "lineno": 502
            },
            {
              "name": "reset_views",
              "lineno": 530
            },
            {
              "name": "repaint",
              "lineno": 535
            },
            {
              "name": "main",
              "lineno": 584
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 41
            },
            {
              "name": "Mosaic",
              "lineno": 58
            },
            {
              "name": "App",
              "lineno": 418
            }
          ]
        }
      ],
      "notes": [
        "GLX: brak .glx/state.json — używam pustych wartości.",
        "GIT: niedostępny — historie Δ ograniczone."
      ]
    },
    "attachments": {
      "schema": "glx.selfdoc",
      "when": "2025-10-02T20:13:20Z",
      "telemetry": {
        "ok": true,
        "error": "",
        "scan_ms": 1598.8996000000002,
        "ast_ms": 1131.206,
        "files_scanned": 200,
        "mods": 200,
        "defs": 2050,
        "classes": 223,
        "git_ok": false,
        "skipped_too_big": 0,
        "skipped_binary_hint": 0,
        "parse_errors": 0,
        "largest_file_bytes": 57134,
        "python_ver": "3.9.2rc1"
      },
      "python": "3.9.2rc1"
    }
  },
  "risk_brief": {
    "system": "Jesteś asystentem inżynierskim GlitchLab. Twoja analiza ma być deterministyczna, konkretna, bez wprowadzania losowości. Oceniaj wpływ zmian na architekturę i HUD/Mosaic⇄AST.",
    "user": "Cel: risk_brief. Przygotuj plan refaktoryzacji i mapę ryzyk.\nRepo: . | LOC=41735, modules=200, defs=2050, classes=223.\nZidentyfikuj moduły krytyczne i zaproponuj kroki poprawy spójności.",
    "context": {
      "glx_state": {},
      "git_head": null,
      "git_branch": null,
      "recent_commits": [],
      "delta_last": [],
      "top_modules": [
        {
          "path": "glitchlab/gui/mosaic/hybrid_ast_mosaic.py",
          "loc": 1382,
          "defs": [
            {
              "name": "_rng_for_meta",
              "lineno": 150
            },
            {
              "name": "_meta_for",
              "lineno": 158
            },
            {
              "name": "ast_deltas",
              "lineno": 178
            },
            {
              "name": "add",
              "lineno": 186
            },
            {
              "name": "compress_ast",
              "lineno": 236
            },
            {
              "name": "build_mosaic_grid",
              "lineno": 267
            },
            {
              "name": "build_mosaic_hex",
              "lineno": 282
            },
            {
              "name": "build_mosaic",
              "lineno": 298
            },
            {
              "name": "region_ids",
              "lineno": 304
            },
            {
              "name": "_xy_of_idx",
              "lineno": 312
            },
            {
              "name": "_sigmoid",
              "lineno": 319
            },
            {
              "name": "_soft_label",
              "lineno": 329
            },
            {
              "name": "_only_py",
              "lineno": 334
            },
            {
              "name": "_abs",
              "lineno": 338
            },
            {
              "name": "tile_dist",
              "lineno": 343
            },
            {
              "name": "_dm_greedy_oneway",
              "lineno": 360
            },
            {
              "name": "_length_penalty",
              "lineno": 374
            },
            {
              "name": "_pair_cost",
              "lineno": 388
            },
            {
              "name": "D_M",
              "lineno": 413
            },
            {
              "name": "phi_region_for",
              "lineno": 435
            },
            {
              "name": "phi_region_for_balanced",
              "lineno": 443
            },
            {
              "name": "phi_region_for_entropy",
              "lineno": 476
            },
            {
              "name": "near_thr",
              "lineno": 477
            },
            {
              "name": "load_policy_json",
              "lineno": 488
            },
            {
              "name": "make_selector_policy_aware",
              "lineno": 518
            },
            {
              "name": "_sel",
              "lineno": 534
            },
            {
              "name": "centroid",
              "lineno": 553
            },
            {
              "name": "phi_cost",
              "lineno": 561
            },
            {
              "name": "psi_feedback",
              "lineno": 582
            },
            {
              "name": "_neighbors_grid",
              "lineno": 609
            },
            {
              "name": "_neighbors_hex_oddr",
              "lineno": 619
            },
            {
              "name": "_adjacency_indices",
              "lineno": 632
            },
            {
              "name": "_connected_components",
              "lineno": 645
            },
            {
              "name": "mosaic_profile",
              "lineno": 679
            },
            {
              "name": "couple_alpha_beta",
              "lineno": 715
            },
            {
              "name": "distance_ast_mosaic",
              "lineno": 736
            },
            {
              "name": "invariants_check",
              "lineno": 743
            },
            {
              "name": "_selector_from_args",
              "lineno": 766
            },
            {
              "name": "run_once",
              "lineno": 779
            },
            {
              "name": "sweep",
              "lineno": 813
            },
            {
              "name": "sign_test_phi2_better",
              "lineno": 829
            },
            {
              "name": "_ast_summary_for_source_det",
              "lineno": 862
            },
            {
              "name": "_file_selector_filter",
              "lineno": 888
            },
            {
              "name": "run_from_git",
              "lineno": 898
            },
            {
              "name": "_pretty_table",
              "lineno": 1031
            },
            {
              "name": "rowfmt",
              "lineno": 1035
            },
            {
              "name": "line",
              "lineno": 1046
            },
            {
              "name": "cmd_run",
              "lineno": 1055
            },
            {
              "name": "cmd_sweep",
              "lineno": 1075
            },
            {
              "name": "cmd_test",
              "lineno": 1087
            },
            {
              "name": "_normpath_under_project",
              "lineno": 1100
            },
            {
              "name": "_emit_fallback_artifacts",
              "lineno": 1105
            },
            {
              "name": "cmd_from_git_dump",
              "lineno": 1157
            },
            {
              "name": "_git_run",
              "lineno": 1281
            },
            {
              "name": "_git_show_file",
              "lineno": 1287
            },
            {
              "name": "_git_top",
              "lineno": 1294
            },
            {
              "name": "cmd_from_git",
              "lineno": 1304
            },
            {
              "name": "build_cli",
              "lineno": 1321
            },
            {
              "name": "main",
              "lineno": 1375
            }
          ],
          "classes": [
            {
              "name": "AstNode",
              "lineno": 127
            },
            {
              "name": "AstSummary",
              "lineno": 138
            },
            {
              "name": "Mosaic",
              "lineno": 256
            }
          ]
        },
        {
          "path": "glitchlab/gui/app.py",
          "loc": 921,
          "defs": [
            {
              "name": "init_styles",
              "lineno": 28
            },
            {
              "name": "__init__",
              "lineno": 87
            },
            {
              "name": "publish",
              "lineno": 89
            },
            {
              "name": "subscribe",
              "lineno": 91
            },
            {
              "name": "request",
              "lineno": 93
            },
            {
              "name": "__init__",
              "lineno": 117
            },
            {
              "name": "__init__",
              "lineno": 132
            },
            {
              "name": "_build_ui",
              "lineno": 168
            },
            {
              "name": "_init_sash",
              "lineno": 232
            },
            {
              "name": "_wire_bus",
              "lineno": 258
            },
            {
              "name": "_on_preset_parsed",
              "lineno": 325
            },
            {
              "name": "_load_image_path",
              "lineno": 334
            },
            {
              "name": "_save_image_path",
              "lineno": 382
            },
            {
              "name": "_pil_to_u8",
              "lineno": 401
            },
            {
              "name": "_array_to_pil",
              "lineno": 414
            },
            {
              "name": "run_step",
              "lineno": 428
            },
            {
              "name": "run_preset",
              "lineno": 465
            },
            {
              "name": "_on_progress",
              "lineno": 515
            },
            {
              "name": "_on_run_done",
              "lineno": 527
            },
            {
              "name": "_on_run_error",
              "lineno": 564
            },
            {
              "name": "_update_bottom_from_cache",
              "lineno": 578
            },
            {
              "name": "_update_edit_menu_state",
              "lineno": 586
            },
            {
              "name": "_on_undo",
              "lineno": 594
            },
            {
              "name": "_on_redo",
              "lineno": 623
            },
            {
              "name": "_toggle_left",
              "lineno": 653
            },
            {
              "name": "_toggle_right",
              "lineno": 673
            },
            {
              "name": "_toggle_hud",
              "lineno": 689
            },
            {
              "name": "_toggle_fullscreen",
              "lineno": 705
            },
            {
              "name": "_get_active_layer_pil",
              "lineno": 719
            },
            {
              "name": "_get_composite_np",
              "lineno": 741
            },
            {
              "name": "_refresh_composite",
              "lineno": 756
            },
            {
              "name": "_layers_snapshot",
              "lineno": 769
            },
            {
              "name": "_calc_layers_sig",
              "lineno": 784
            },
            {
              "name": "_publish_layers_snapshot",
              "lineno": 793
            },
            {
              "name": "_on_layers_changed",
              "lineno": 806
            },
            {
              "name": "_on_layer_add",
              "lineno": 812
            },
            {
              "name": "_on_layer_remove",
              "lineno": 845
            },
            {
              "name": "_on_layer_set_active",
              "lineno": 856
            },
            {
              "name": "_on_layer_update",
              "lineno": 865
            },
            {
              "name": "_on_layers_reorder",
              "lineno": 882
            },
            {
              "name": "main",
              "lineno": 902
            }
          ],
          "classes": [
            {
              "name": "EventBus",
              "lineno": 86
            },
            {
              "name": "AppState",
              "lineno": 116
            },
            {
              "name": "App",
              "lineno": 131
            }
          ]
        },
        {
          "path": "glitchlab/tests/ast_mosaic_coupled.py",
          "loc": 732,
          "defs": [
            {
              "name": "energy",
              "lineno": 53
            },
            {
              "name": "entropy",
              "lineno": 57
            },
            {
              "name": "_node_label",
              "lineno": 75
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 91
            },
            {
              "name": "walk",
              "lineno": 92
            },
            {
              "name": "_group_of",
              "lineno": 111
            },
            {
              "name": "_coords_for_tree",
              "lineno": 119
            },
            {
              "name": "walk",
              "lineno": 122
            },
            {
              "name": "_meta_for_node",
              "lineno": 148
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 164
            },
            {
              "name": "group_centroids",
              "lineno": 193
            },
            {
              "name": "coords_for_lambda",
              "lineno": 204
            },
            {
              "name": "build_base_mosaic",
              "lineno": 219
            },
            {
              "name": "_norm01",
              "lineno": 231
            },
            {
              "name": "_sobel_mag",
              "lineno": 238
            },
            {
              "name": "mosaic_from_ast",
              "lineno": 255
            },
            {
              "name": "_pos_lam",
              "lineno": 269
            },
            {
              "name": "region_indices",
              "lineno": 296
            },
            {
              "name": "region_centroid",
              "lineno": 302
            },
            {
              "name": "region_feats",
              "lineno": 310
            },
            {
              "name": "fuse_meta",
              "lineno": 322
            },
            {
              "name": "draw_ast",
              "lineno": 331
            },
            {
              "name": "draw_mosaic",
              "lineno": 345
            },
            {
              "name": "draw_region_frame",
              "lineno": 360
            },
            {
              "name": "draw_fusion",
              "lineno": 371
            },
            {
              "name": "draw_infographic",
              "lineno": 406
            },
            {
              "name": "__init__",
              "lineno": 445
            },
            {
              "name": "_font_step",
              "lineno": 540
            },
            {
              "name": "reset_views",
              "lineno": 547
            },
            {
              "name": "render",
              "lineno": 553
            },
            {
              "name": "on_lambda_changed",
              "lineno": 581
            },
            {
              "name": "on_node_changed",
              "lineno": 585
            },
            {
              "name": "recompute_mosaic_from_ast",
              "lineno": 590
            },
            {
              "name": "apply_feedback_and_recompute",
              "lineno": 609
            },
            {
              "name": "feats_at",
              "lineno": 618
            },
            {
              "name": "on_region_changed",
              "lineno": 641
            },
            {
              "name": "on_pick_ast",
              "lineno": 646
            },
            {
              "name": "on_click_any",
              "lineno": 656
            },
            {
              "name": "repaint",
              "lineno": 679
            },
            {
              "name": "main",
              "lineno": 725
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 44
            },
            {
              "name": "Mosaic",
              "lineno": 62
            },
            {
              "name": "App",
              "lineno": 444
            }
          ]
        },
        {
          "path": "glitchlab/gui/mosaic/tests/ast_mosaic_coupled.py",
          "loc": 732,
          "defs": [
            {
              "name": "energy",
              "lineno": 53
            },
            {
              "name": "entropy",
              "lineno": 57
            },
            {
              "name": "_node_label",
              "lineno": 75
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 91
            },
            {
              "name": "walk",
              "lineno": 92
            },
            {
              "name": "_group_of",
              "lineno": 111
            },
            {
              "name": "_coords_for_tree",
              "lineno": 119
            },
            {
              "name": "walk",
              "lineno": 122
            },
            {
              "name": "_meta_for_node",
              "lineno": 148
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 164
            },
            {
              "name": "group_centroids",
              "lineno": 193
            },
            {
              "name": "coords_for_lambda",
              "lineno": 204
            },
            {
              "name": "build_base_mosaic",
              "lineno": 219
            },
            {
              "name": "_norm01",
              "lineno": 231
            },
            {
              "name": "_sobel_mag",
              "lineno": 238
            },
            {
              "name": "mosaic_from_ast",
              "lineno": 255
            },
            {
              "name": "_pos_lam",
              "lineno": 269
            },
            {
              "name": "region_indices",
              "lineno": 296
            },
            {
              "name": "region_centroid",
              "lineno": 302
            },
            {
              "name": "region_feats",
              "lineno": 310
            },
            {
              "name": "fuse_meta",
              "lineno": 322
            },
            {
              "name": "draw_ast",
              "lineno": 331
            },
            {
              "name": "draw_mosaic",
              "lineno": 345
            },
            {
              "name": "draw_region_frame",
              "lineno": 360
            },
            {
              "name": "draw_fusion",
              "lineno": 371
            },
            {
              "name": "draw_infographic",
              "lineno": 406
            },
            {
              "name": "__init__",
              "lineno": 445
            },
            {
              "name": "_font_step",
              "lineno": 540
            },
            {
              "name": "reset_views",
              "lineno": 547
            },
            {
              "name": "render",
              "lineno": 553
            },
            {
              "name": "on_lambda_changed",
              "lineno": 581
            },
            {
              "name": "on_node_changed",
              "lineno": 585
            },
            {
              "name": "recompute_mosaic_from_ast",
              "lineno": 590
            },
            {
              "name": "apply_feedback_and_recompute",
              "lineno": 609
            },
            {
              "name": "feats_at",
              "lineno": 618
            },
            {
              "name": "on_region_changed",
              "lineno": 641
            },
            {
              "name": "on_pick_ast",
              "lineno": 646
            },
            {
              "name": "on_click_any",
              "lineno": 656
            },
            {
              "name": "repaint",
              "lineno": 679
            },
            {
              "name": "main",
              "lineno": 725
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 44
            },
            {
              "name": "Mosaic",
              "lineno": 62
            },
            {
              "name": "App",
              "lineno": 444
            }
          ]
        },
        {
          "path": "glitchlab/.githooks/post-commit.py",
          "loc": 640,
          "defs": [
            {
              "name": "_is_git_repo",
              "lineno": 24
            },
            {
              "name": "_strip_inline_comment",
              "lineno": 34
            },
            {
              "name": "_parse_glx_run",
              "lineno": 50
            },
            {
              "name": "_validate_mask",
              "lineno": 99
            },
            {
              "name": "_clean_value",
              "lineno": 107
            },
            {
              "name": "_parse_env_file",
              "lineno": 114
            },
            {
              "name": "_load_env",
              "lineno": 127
            },
            {
              "name": "_expand_vars_and_user",
              "lineno": 147
            },
            {
              "name": "_resolve_path",
              "lineno": 152
            },
            {
              "name": "_norm_paths_in_env",
              "lineno": 166
            },
            {
              "name": "_log",
              "lineno": 190
            },
            {
              "name": "_fail",
              "lineno": 194
            },
            {
              "name": "_git",
              "lineno": 200
            },
            {
              "name": "_git_top",
              "lineno": 204
            },
            {
              "name": "_rev_parse",
              "lineno": 216
            },
            {
              "name": "_rev_ok",
              "lineno": 221
            },
            {
              "name": "_empty_tree_oid",
              "lineno": 230
            },
            {
              "name": "_detect_base",
              "lineno": 246
            },
            {
              "name": "_dirs_chain_up",
              "lineno": 284
            },
            {
              "name": "_req",
              "lineno": 313
            },
            {
              "name": "_as_int",
              "lineno": 319
            },
            {
              "name": "_as_float01",
              "lineno": 326
            },
            {
              "name": "_redact_env",
              "lineno": 337
            },
            {
              "name": "_module_exists",
              "lineno": 348
            },
            {
              "name": "_module_cmd_from_candidates",
              "lineno": 355
            },
            {
              "name": "_child_env",
              "lineno": 379
            },
            {
              "name": "_run_gateway",
              "lineno": 386
            },
            {
              "name": "_run_mosaic",
              "lineno": 424
            },
            {
              "name": "_send_mail",
              "lineno": 476
            },
            {
              "name": "_should_zip",
              "lineno": 516
            },
            {
              "name": "_writestr_deterministic",
              "lineno": 523
            },
            {
              "name": "_make_zip",
              "lineno": 530
            },
            {
              "name": "main",
              "lineno": 579
            }
          ],
          "classes": []
        },
        {
          "path": "glitchlab/analysis/autonomy/gateway.py",
          "loc": 637,
          "defs": [
            {
              "name": "_strip_inline_comment",
              "lineno": 46
            },
            {
              "name": "_clean_value",
              "lineno": 61
            },
            {
              "name": "_simple_parse_env",
              "lineno": 68
            },
            {
              "name": "_dirs_chain_up",
              "lineno": 82
            },
            {
              "name": "_load_dotenv_chain_into_environ",
              "lineno": 102
            },
            {
              "name": "_norm_from",
              "lineno": 134
            },
            {
              "name": "_best_guess_package_root",
              "lineno": 141
            },
            {
              "name": "_int_env",
              "lineno": 165
            },
            {
              "name": "_utc_iso",
              "lineno": 227
            },
            {
              "name": "_safe_read_json",
              "lineno": 231
            },
            {
              "name": "_read_text",
              "lineno": 240
            },
            {
              "name": "_rel_to_project",
              "lineno": 247
            },
            {
              "name": "_is_binary_like",
              "lineno": 254
            },
            {
              "name": "_redact_env_snapshot",
              "lineno": 264
            },
            {
              "name": "scan_repository",
              "lineno": 280
            },
            {
              "name": "_excluded",
              "lineno": 295
            },
            {
              "name": "_run_git",
              "lineno": 382
            },
            {
              "name": "git_snapshot",
              "lineno": 393
            },
            {
              "name": "make_prompt_pack",
              "lineno": 437
            },
            {
              "name": "build_selfdoc",
              "lineno": 474
            },
            {
              "name": "write_outputs",
              "lineno": 522
            },
            {
              "name": "_parse_argv",
              "lineno": 562
            },
            {
              "name": "main",
              "lineno": 589
            }
          ],
          "classes": [
            {
              "name": "Telemetry",
              "lineno": 190
            },
            {
              "name": "SelfDocPack",
              "lineno": 208
            }
          ]
        },
        {
          "path": "glitchlab/tests/metarelation_scaling_test.py",
          "loc": 591,
          "defs": [
            {
              "name": "energy",
              "lineno": 49
            },
            {
              "name": "entropy",
              "lineno": 53
            },
            {
              "name": "build_demo_mosaic",
              "lineno": 70
            },
            {
              "name": "region_indices",
              "lineno": 89
            },
            {
              "name": "region_centroid",
              "lineno": 95
            },
            {
              "name": "region_feats",
              "lineno": 103
            },
            {
              "name": "fuse_meta",
              "lineno": 118
            },
            {
              "name": "_node_label",
              "lineno": 131
            },
            {
              "name": "_group_of",
              "lineno": 149
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 167
            },
            {
              "name": "walk",
              "lineno": 171
            },
            {
              "name": "_coords_for_tree",
              "lineno": 190
            },
            {
              "name": "walk",
              "lineno": 198
            },
            {
              "name": "_meta_for_node",
              "lineno": 228
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 248
            },
            {
              "name": "group_centroids",
              "lineno": 280
            },
            {
              "name": "coords_for_lambda",
              "lineno": 291
            },
            {
              "name": "draw_ast",
              "lineno": 306
            },
            {
              "name": "draw_mosaic",
              "lineno": 317
            },
            {
              "name": "draw_region_frame",
              "lineno": 332
            },
            {
              "name": "draw_fusion",
              "lineno": 342
            },
            {
              "name": "draw_infographic",
              "lineno": 381
            },
            {
              "name": "__init__",
              "lineno": 419
            },
            {
              "name": "_font_step",
              "lineno": 492
            },
            {
              "name": "render",
              "lineno": 502
            },
            {
              "name": "reset_views",
              "lineno": 530
            },
            {
              "name": "repaint",
              "lineno": 535
            },
            {
              "name": "main",
              "lineno": 584
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 41
            },
            {
              "name": "Mosaic",
              "lineno": 58
            },
            {
              "name": "App",
              "lineno": 418
            }
          ]
        },
        {
          "path": "glitchlab/gui/mosaic/tests/metarelation_scaling_test.py",
          "loc": 591,
          "defs": [
            {
              "name": "energy",
              "lineno": 49
            },
            {
              "name": "entropy",
              "lineno": 53
            },
            {
              "name": "build_demo_mosaic",
              "lineno": 70
            },
            {
              "name": "region_indices",
              "lineno": 89
            },
            {
              "name": "region_centroid",
              "lineno": 95
            },
            {
              "name": "region_feats",
              "lineno": 103
            },
            {
              "name": "fuse_meta",
              "lineno": 118
            },
            {
              "name": "_node_label",
              "lineno": 131
            },
            {
              "name": "_group_of",
              "lineno": 149
            },
            {
              "name": "_attach_parents_and_depths",
              "lineno": 167
            },
            {
              "name": "walk",
              "lineno": 171
            },
            {
              "name": "_coords_for_tree",
              "lineno": 190
            },
            {
              "name": "walk",
              "lineno": 198
            },
            {
              "name": "_meta_for_node",
              "lineno": 228
            },
            {
              "name": "ast_nodes_from_code",
              "lineno": 248
            },
            {
              "name": "group_centroids",
              "lineno": 280
            },
            {
              "name": "coords_for_lambda",
              "lineno": 291
            },
            {
              "name": "draw_ast",
              "lineno": 306
            },
            {
              "name": "draw_mosaic",
              "lineno": 317
            },
            {
              "name": "draw_region_frame",
              "lineno": 332
            },
            {
              "name": "draw_fusion",
              "lineno": 342
            },
            {
              "name": "draw_infographic",
              "lineno": 381
            },
            {
              "name": "__init__",
              "lineno": 419
            },
            {
              "name": "_font_step",
              "lineno": 492
            },
            {
              "name": "render",
              "lineno": 502
            },
            {
              "name": "reset_views",
              "lineno": 530
            },
            {
              "name": "repaint",
              "lineno": 535
            },
            {
              "name": "main",
              "lineno": 584
            }
          ],
          "classes": [
            {
              "name": "AstNodeMeta",
              "lineno": 41
            },
            {
              "name": "Mosaic",
              "lineno": 58
            },
            {
              "name": "App",
              "lineno": 418
            }
          ]
        }
      ],
      "notes": [
        "GLX: brak .glx/state.json — używam pustych wartości.",
        "GIT: niedostępny — historie Δ ograniczone."
      ]
    },
    "attachments": {
      "schema": "glx.selfdoc",
      "when": "2025-10-02T20:13:20Z",
      "telemetry": {
        "ok": true,
        "error": "",
        "scan_ms": 1598.8996000000002,
        "ast_ms": 1131.206,
        "files_scanned": 200,
        "mods": 200,
        "defs": 2050,
        "classes": 223,
        "git_ok": false,
        "skipped_too_big": 0,
        "skipped_binary_hint": 0,
        "parse_errors": 0,
        "largest_file_bytes": 57134,
        "python_ver": "3.9.2rc1"
      },
      "python": "3.9.2rc1"
    }
  }
}